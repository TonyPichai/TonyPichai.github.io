!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Best Value Calculator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="projects.html">Projects</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <main class="content">
    <section class="calculator">
      <h1>Best Value Calculator</h1>

      <div class="grid">
        <div class="product">
          <h2>Product 1</h2>
          <input type="number" id="qty1" placeholder="Quantity">
          <select id="unit1">
            <option value="g">Grams</option>
            <option value="kg">Kilograms</option>
            <option value="ml">Millilitres</option>
            <option value="l">Litres</option>
            <option value="inch">Inches (Pizza Diameter)</option>
            <option value="custom">Custom</option>
          </select>
          <input type="number" id="customFactor1" placeholder="Units per base unit" step="0.01" style="display:none">
          <input type="text" id="customLabel1" placeholder="Custom unit label (e.g., slices)" style="display:none">
          <input type="number" id="price1" placeholder="Price (Â£)" step="0.01">
        </div>

        <div class="product">
          <h2>Product 2</h2>
          <input type="number" id="qty2" placeholder="Quantity">
          <select id="unit2">
            <option value="g">Grams</option>
            <option value="kg">Kilograms</option>
            <option value="ml">Millilitres</option>
            <option value="l">Litres</option>
            <option value="inch">Inches (Pizza Diameter)</option>
            <option value="custom">Custom</option>
          </select>
          <input type="number" id="customFactor2" placeholder="Units per base unit" step="0.01" style="display:none">
          <input type="text" id="customLabel2" placeholder="Custom unit label (e.g., slices)" style="display:none">
          <input type="number" id="price2" placeholder="Price (Â£)" step="0.01">
        </div>
      </div>

      <button id="compareBtn">Compare</button>
      <div id="result" class="result"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Tony Pichai</p>
  </footer>

  <script>
    function convertToBase(quantity, unit, customUnitFactor = 1) {
      switch(unit) {
        case 'g': return quantity; // keep grams as base for comparison
        case 'kg': return quantity * 1000; // convert kg to grams
        case 'ml': return quantity; // keep ml as base
        case 'l': return quantity * 1000; // convert L to ml
        case 'inch': return Math.PI * Math.pow(quantity / 2, 2); // pizza area in square inches
        case 'custom': return quantity * customUnitFactor; // user-defined
        default: return quantity;
      }
    }

    function calculateValue() {
      const qty1 = parseFloat(document.getElementById('qty1').value);
      const unit1 = document.getElementById('unit1').value;
      const price1 = parseFloat(document.getElementById('price1').value);
      const customFactor1 = parseFloat(document.getElementById('customFactor1').value) || 1;
      const customLabel1 = document.getElementById('customLabel1').value || 'unit';

      const qty2 = parseFloat(document.getElementById('qty2').value);
      const unit2 = document.getElementById('unit2').value;
      const price2 = parseFloat(document.getElementById('price2').value);
      const customFactor2 = parseFloat(document.getElementById('customFactor2').value) || 1;
      const customLabel2 = document.getElementById('customLabel2').value || 'unit';

      if (isNaN(qty1) || isNaN(price1) || isNaN(qty2) || isNaN(price2) || qty1 <= 0 || qty2 <= 0) {
        document.getElementById('result').innerText = 'Please enter valid positive quantities and prices.';
        return;
      }

      const baseQty1 = convertToBase(qty1, unit1, customFactor1);
      const baseQty2 = convertToBase(qty2, unit2, customFactor2);

      if (baseQty1 <= 0 || baseQty2 <= 0) {
        document.getElementById('result').innerText = 'Invalid conversion factor or quantity resulting in zero or negative base unit.';
        return;
      }

      const value1 = price1 / baseQty1;
      const value2 = price2 / baseQty2;

      const unitLabel1 = unit1 === 'custom' ? customLabel1 : unit1;
      const unitLabel2 = unit2 === 'custom' ? customLabel2 : unit2;

      let result = `Product 1: Â£${value1.toFixed(2)} per ${unitLabel1}\n`;
      result += `Product 2: Â£${value2.toFixed(2)} per ${unitLabel2}\n`;

      if (Math.abs(value1 - value2) < 0.0001) {
        result += 'Both products are essentially the same value.';
      } else if (value1 < value2) {
        result += 'ðŸ‘‰ Product 1 is better value.';
      } else {
        result += 'ðŸ‘‰ Product 2 is better value.';
      }

      document.getElementById('result').innerText = result;
    }

    function toggleCustomField(unitSelectId, factorId, labelId) {
      const unit = document.getElementById(unitSelectId).value;
      document.getElementById(factorId).style.display = unit === 'custom' ? 'block' : 'none';
      document.getElementById(labelId).style.display = unit === 'custom' ? 'block' : 'none';
    }

    document.getElementById('unit1').addEventListener('change', () => toggleCustomField('unit1', 'customFactor1', 'customLabel1'));
    document.getElementById('unit2').addEventListener('change', () => toggleCustomField('unit2', 'customFactor2', 'customLabel2'));
    document.getElementById('compareBtn').addEventListener('click', calculateValue);
  </script>
</body>
</html>